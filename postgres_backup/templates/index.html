<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script type="module" src="{{ url_for('static', filename='header.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='button.js') }}"></script>
  </head>
  <body>
    <app-header label="Kubetools Postgres Backup"></app-header>
    <main>
      <h2>Tables</h2>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Rows</th>
          </tr>
        </thead>
        <tbody>
          {% for table in tables %}
            <tr>
              <td class="highlighted">{{ table.name }}</td>
              <td>{{ table.count }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <p>
        <form method="post" action="/backup">
          <app-button label="Backup"></app-button>
        </form>
      </p>
      <h2>Backups</h2>
      <table id="backups">
        <thead>
          <tr>
            <th></th>
            <th>Date</th>
            <th>Name</th>
            <th>Size</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for backup in backups %}
            <tr>
              <td><input type="radio" name="backup" id="{{ backup.name }}"></td>
              <td class="highlighted">{{ backup.last_modified }}</td>
              <td>{{ backup.name }}</td>
              <td>{{ backup.size }}</td>
              <td>
                <form method="post" action="/restore/{{ backup.name }}">
                  <app-button disabled class="restore" label="Restore"></app-button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </main>
  </body>
</html>